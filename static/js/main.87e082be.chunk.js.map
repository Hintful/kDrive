{"version":3,"sources":["firebase.js","contexts/AuthContext.js","components/CenteredContainer.js","components/auth/Signup.js","components/auth/Profile.js","components/auth/Signin.js","components/auth/PrivateRoute.js","components/auth/PasswordReset.js","components/auth/UpdateProfile.js","hooks/UseFolder.js","components/drive/AddFolder.js","components/drive/Folder.js","components/drive/Navbar.js","components/drive/FolderBreadCrumbs.js","components/drive/AddFile.js","components/drive/File.js","components/drive/Dashboard.js","components/App.js","index.js"],"names":["app","firebase","initializeApp","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","auth","firestore","database","folders","collection","files","getCurrentTimestamp","FieldValue","serverTimestamp","formatDoc","doc","id","data","storage","AuthContext","createContext","useAuth","useContext","AuthProvider","children","useState","currentUser","setCurrentUser","loading","setLoading","useEffect","onAuthStateChanged","user","value","signUp","email","pw","createUserWithEmailAndPassword","signIn","signInWithEmailAndPassword","signOut","resetPassword","sendPasswordResetEmail","updateEmail","updatePassword","password","Provider","CenteredContainer","Container","className","style","minHeight","maxWidth","Signup","emailRef","useRef","pwRef","pwConfirmRef","error","setError","history","useHistory","e","a","preventDefault","current","toast","duration","success","setTimeout","push","Card","Body","Alert","variant","Form","onSubmit","Group","Label","Control","type","ref","required","Button","disabled","to","Profile","onClick","Signin","class","PrivateRoute","Component","component","otherComponents","render","props","PasswordReset","UpdateProfile","handlePromises","Value","Promise","all","then","catch","finally","defaultValue","placeholder","ACTIONS","ROOT","name","path","reducer","state","payload","folderId","folder","childFiles","childFolders","UseFolder","useReducer","dispatch","get","console","log","where","uid","orderBy","onSnapshot","snapshot","docs","map","AddFolder","currentFolder","modal","setModal","setName","toggleModal","size","Modal","show","onHide","add","parentFolderId","owner","createdAt","onChange","target","Footer","Folder","pathname","as","Link","NavbarComponent","Navbar","bg","expand","Brand","Nav","FolderBreadCrumbs","Breadcrumb","listProps","index","Item","linkAs","linkProps","slice","active","AddFile","uploadingFiles","setUploadingFiles","file","uuid","previousUploadingFiles","progress","filePath","obj","join","uploadTask","put","on","bytesTransferred","totalBytes","uploadingFile","filter","getDownloadURL","url","existingFiles","existingFile","update","opacity","display","length","ReactDOM","createPortal","position","bottom","right","Toast","onClose","Header","closeButton","ProgressBar","animated","now","label","Math","round","document","body","File","href","Dashboard","useParams","useLocation","fluid","classname","flexDirection","flexWrap","childFolder","childFile","App","basename","exact","StrictMode","getElementById"],"mappings":"mQAKMA,G,kBAAMC,IAASC,cAAc,CAC/BC,OAAQC,0CACRC,WAAYD,+BACZE,UAAWF,eACXG,cAAeH,2BACfI,kBAAmBJ,eACnBK,MAAOL,4CACPM,cAAeN,kBAINO,EAAOX,EAAIW,OAIlBC,EAAYZ,EAAIY,YACTC,EAAW,CACpBC,QAASF,EAAUG,WAAW,WAC9BC,MAAOJ,EAAUG,WAAW,SAC5BE,oBAAqBhB,IAASW,UAAUM,WAAWC,gBACnDC,UAAW,SAAAC,GACP,OAAO,aAAEC,GAAID,EAAIC,IAAOD,EAAIE,UAKvBC,EAAUxB,EAAIwB,U,OC5BrBC,EAAcC,0BAEb,SAASC,IACZ,OAAOC,qBAAWH,GAGf,SAASI,EAAT,GAAqC,IAAbC,EAAY,EAAZA,SAAY,EACDC,qBADC,mBAChCC,EADgC,KACnBC,EADmB,OAETF,oBAAS,GAFA,mBAEhCG,EAFgC,KAEvBC,EAFuB,KA4BvCC,qBAAU,WAMN,OALoBzB,EAAK0B,oBAAmB,SAAAC,GACxCL,EAAeK,GACfH,GAAW,QAIhB,IAGH,IAAMI,EAAQ,CAAEP,cAAaQ,OAlC7B,SAAgBC,EAAOC,GACnB,OAAO/B,EAAKgC,+BAA+BF,EAAOC,IAiCjBE,OA9BrC,SAAgBH,EAAOC,GACnB,OAAO/B,EAAKkC,2BAA2BJ,EAAOC,IA6BLI,QA1B7C,WACI,OAAOnC,EAAKmC,WAyBsCC,cAtBtD,SAAuBN,GACnB,OAAO9B,EAAKqC,uBAAuBP,IAqB8BQ,YAlBrE,SAAqBR,GACjB,OAAOT,EAAYiB,YAAYR,IAiB+CS,eAdlF,SAAwBC,GACpB,OAAOnB,EAAYkB,eAAeC,KActC,OACI,cAAC1B,EAAY2B,SAAb,CAAsBb,MAAOA,EAA7B,UACML,GAAWJ,I,oBClCVuB,EAbW,SAAC,GAAkB,IAAhBvB,EAAe,EAAfA,SAC3B,OACE,mCACE,cAACwB,EAAA,EAAD,CAAWC,UAAU,mDACnBC,MAAO,CAAEC,UAAW,SADtB,SAEE,qBAAKF,UAAU,QAAQC,MAAO,CAAEE,SAAU,SAA1C,SACI5B,SCFG,SAAS6B,IACtB,IAAMC,EAAWC,mBACXC,EAAQD,mBACRE,EAAeF,mBACbrB,EAAWb,IAAXa,OAJuB,EAKLT,mBAAS,IALJ,mBAKxBiC,EALwB,KAKjBC,EALiB,OAMDlC,oBAAS,GANR,mBAMxBG,EANwB,KAMfC,EANe,KAOzB+B,EAAUC,cAPe,4CAS/B,WAA4BC,GAA5B,SAAAC,EAAA,yDACED,EAAEE,iBAEER,EAAMS,QAAQhC,QAAUwB,EAAaQ,QAAQhC,MAHnD,uBAKIiC,IAAMR,MAAM,0BAA2B,CAAES,SAAU,MALvD,0CAWIR,EAAS,IACT9B,GAAW,GAZf,SAaUK,EAAOoB,EAASW,QAAQhC,MAAOuB,EAAMS,QAAQhC,OAbvD,OAcIiC,IAAME,QAAQ,mBAAoB,CAAED,SAAU,OAC9CE,YAAW,WACTT,EAAQU,KAAK,WACZ,MAjBP,kDAmBIJ,IAAMR,MAAM,4BAA6B,CAAES,SAAU,MAnBzD,QAqBEtC,GAAW,GArBb,2DAT+B,sBAiC/B,OACE,eAAC,EAAD,WACE,cAAC,IAAD,IACA,cAAC0C,EAAA,EAAD,UACE,eAACA,EAAA,EAAKC,KAAN,WACE,oBAAIvB,UAAU,mBAAd,qBACES,GACA,cAACe,EAAA,EAAD,CAAOC,QAAQ,SAAf,SAAyBhB,IAE3B,eAACiB,EAAA,EAAD,CAAMC,SA1CiB,4CA0CvB,UACE,eAACD,EAAA,EAAKE,MAAN,CAAY7D,GAAG,QAAf,UACE,cAAC2D,EAAA,EAAKG,MAAN,oBACA,cAACH,EAAA,EAAKI,QAAN,CAAcC,KAAK,QAAQC,IAAK3B,EAAU4B,UAAQ,OAEpD,eAACP,EAAA,EAAKE,MAAN,CAAY7D,GAAG,WAAf,UACE,cAAC2D,EAAA,EAAKG,MAAN,uBACA,cAACH,EAAA,EAAKI,QAAN,CAAcC,KAAK,WAAWC,IAAKzB,EAAO0B,UAAQ,OAEpD,eAACP,EAAA,EAAKE,MAAN,CAAY7D,GAAG,mBAAf,UACE,cAAC2D,EAAA,EAAKG,MAAN,oCACA,cAACH,EAAA,EAAKI,QAAN,CAAcC,KAAK,WAAWC,IAAKxB,EAAcyB,UAAQ,OAE3D,cAACC,EAAA,EAAD,CAAQC,SAAUxD,EAASoD,KAAK,SAAS/B,UAAU,QAAnD,6BAIN,sBAAKA,UAAU,yBAAf,sCAC6B,cAAC,IAAD,CAAMoC,GAAG,UAAT,2BC5DnC,IA8CeC,EA9CC,WAAM,4CAEpB,sBAAAvB,EAAA,6DACEJ,EAAS,IADX,kBAIUnB,IAJV,OAKI0B,IAAME,QAAQ,cAAe,CAAED,SAAU,OACzCE,YAAW,cAER,MACHT,EAAQU,KAAK,WATjB,gDAWIJ,IAAMR,MAAM,sBAAuB,CAAES,SAAU,MAXnD,0DAFoB,4BAkBM1C,mBAAS,IAlBf,mBAkBbiC,EAlBa,KAkBNC,EAlBM,OAmBatC,IAAzBK,EAnBY,EAmBZA,YAAac,EAnBD,EAmBCA,QACfoB,EAAUC,cAEhB,OACE,eAAC,EAAD,WACE,cAAC,IAAD,IACA,cAACU,EAAA,EAAD,UACE,eAACA,EAAA,EAAKC,KAAN,WACE,oBAAIvB,UAAU,mBAAd,qBACES,GACA,cAACe,EAAA,EAAD,CAAOC,QAAQ,SAAf,SAAyBhB,IAE3B,4CALF,IAK4BhC,EAAYS,MACtC,cAAC,IAAD,CAAMkD,GAAG,kBAAkBpC,UAAU,0BAArC,4BACA,cAAC,IAAD,CAAMoC,GAAG,IAAIpC,UAAU,6BAAvB,+BACA,cAAC,IAAD,CAAMoC,GAAG,GAAGpC,UAAU,oCAAoCsC,QAlC7C,WAAD,gCAkCZ,2BAKJ,qBAAKtC,UAAU,+BCvCN,SAASuC,IACtB,IAAMlC,EAAWC,mBACXC,EAAQD,mBACNjB,EAAWjB,IAAXiB,OAHuB,EAILb,mBAAS,IAJJ,mBAIxBiC,EAJwB,KAIjBC,EAJiB,OAKDlC,oBAAS,GALR,mBAKxBG,EALwB,KAKfC,EALe,KAMzB+B,EAAUC,cANe,4CAQ/B,WAA4BC,GAA5B,SAAAC,EAAA,6DACED,EAAEE,iBADJ,SAIIL,EAAS,IACT9B,GAAW,GALf,SAMUS,EAAOgB,EAASW,QAAQhC,MAAOuB,EAAMS,QAAQhC,OANvD,OAOIiC,IAAME,QAAQ,aAAc,CAAED,SAAU,OACxCE,YAAW,WACTT,EAAQU,KAAK,KACbzC,GAAW,KACV,MAXP,kDAaIqC,IAAMR,MAAM,qBAAsB,CAAES,SAAU,MAblD,QAeEtC,GAAW,GAfb,2DAR+B,sBA0B/B,OACE,eAAC,EAAD,WACE,cAAC,IAAD,IACA,qBAAIoB,UAAU,yBAAd,UAAuC,uBAAMA,UAAU,WAAhB,UAA2B,mBAAGwC,MAAM,2BAApC,QAAvC,WACA,cAAClB,EAAA,EAAD,UACE,eAACA,EAAA,EAAKC,KAAN,WACE,oBAAIvB,UAAU,mBAAd,qBACES,GACA,cAACe,EAAA,EAAD,CAAOC,QAAQ,SAAf,SAAyBhB,IAE3B,eAACiB,EAAA,EAAD,CAAMC,SApCiB,4CAoCvB,UACE,eAACD,EAAA,EAAKE,MAAN,CAAY7D,GAAG,QAAf,UACE,cAAC2D,EAAA,EAAKG,MAAN,oBACA,cAACH,EAAA,EAAKI,QAAN,CAAcC,KAAK,QAAQC,IAAK3B,EAAU4B,UAAQ,OAEpD,eAACP,EAAA,EAAKE,MAAN,CAAY7D,GAAG,WAAf,UACE,cAAC2D,EAAA,EAAKG,MAAN,uBACA,cAACH,EAAA,EAAKI,QAAN,CAAcC,KAAK,WAAWC,IAAKzB,EAAO0B,UAAQ,OAEpD,cAACC,EAAA,EAAD,CAAQC,SAAUxD,EAASoD,KAAK,SAAS/B,UAAU,QAAnD,wBAEF,qBAAKA,UAAU,yBAAf,SACE,cAAC,IAAD,CAAMoC,GAAG,SAAT,qCAIN,sBAAKpC,UAAU,yBAAf,oCACyB,cAAC,IAAD,CAAMoC,GAAG,UAAT,2B,YCzChBK,EAfM,SAAC,GAAkD,IAArCC,EAAoC,EAA/CC,UAAyBC,EAAsB,6BAC7DnE,EAAgBL,IAAhBK,YAER,OACE,cAAC,IAAD,2BACMmE,GADN,IAEEC,OAAU,SAAAC,GACR,OAAOrE,EAAc,cAACiE,EAAD,eAAeI,IAAY,cAAC,IAAD,CAAUV,GAAG,iBCJtD,SAASW,IACtB,IAAM1C,EAAWC,mBACTd,EAAkBpB,IAAlBoB,cAF8B,EAGZhB,mBAAS,IAHG,mBAG/BiC,EAH+B,KAGxBC,EAHwB,OAIRlC,oBAAS,GAJD,mBAI/BG,EAJ+B,KAItBC,EAJsB,iDAMtC,WAA4BiC,GAA5B,SAAAC,EAAA,6DACED,EAAEE,iBADJ,SAIIL,EAAS,IACT9B,GAAW,GALf,SAMUY,EAAca,EAASW,QAAQhC,OANzC,OAOIiC,IAAME,QAAQ,uCAAwC,CAAED,SAAU,MAPtE,gDASIR,EAAS,2CATb,QAWE9B,GAAW,GAXb,0DANsC,sBAoBtC,OACE,eAAC,EAAD,WACE,cAAC,IAAD,IACA,cAAC0C,EAAA,EAAD,UACE,eAACA,EAAA,EAAKC,KAAN,WACE,oBAAIvB,UAAU,mBAAd,4BACES,GACA,cAACe,EAAA,EAAD,CAAOC,QAAQ,SAAf,SAAyBhB,IAE3B,eAACiB,EAAA,EAAD,CAAMC,SA7BwB,4CA6B9B,UACE,eAACD,EAAA,EAAKE,MAAN,CAAY7D,GAAG,QAAf,UACE,cAAC2D,EAAA,EAAKG,MAAN,oBACA,cAACH,EAAA,EAAKI,QAAN,CAAcC,KAAK,QAAQC,IAAK3B,EAAU4B,UAAQ,OAEpD,cAACC,EAAA,EAAD,CAAQC,SAAUxD,EAASoD,KAAK,SAAS/B,UAAU,QAAnD,+BAEF,qBAAKA,UAAU,yBAAf,SACE,cAAC,IAAD,CAAMoC,GAAG,UAAT,4BAIN,sBAAKpC,UAAU,yBAAf,oCACyB,cAAC,IAAD,CAAMoC,GAAG,UAAT,2BC1ChB,SAASY,IACtB,IAAM3C,EAAWC,mBACXC,EAAQD,mBACRE,EAAeF,mBAHiB,EAIelC,IAA7CK,EAJ8B,EAI9BA,YAAaiB,EAJiB,EAIjBA,YAAaC,EAJI,EAIJA,eAJI,EAKZnB,mBAAS,IALG,mBAK/BiC,EAL+B,KAKxBC,EALwB,OAMRlC,oBAAS,GAND,mBAM/BG,EAN+B,KAMtBC,EANsB,KAOhC+B,EAAUC,cAmChB,OACE,eAAC,EAAD,WACE,cAAC,IAAD,IACA,cAACU,EAAA,EAAD,UACE,eAACA,EAAA,EAAKC,KAAN,WACE,oBAAIvB,UAAU,mBAAd,4BACES,GACA,cAACe,EAAA,EAAD,CAAOC,QAAQ,SAAf,SAAyBhB,IAE3B,eAACiB,EAAA,EAAD,CAAMC,SA1Cd,SAAsBd,GAGpB,GAFAA,EAAEE,iBAEER,EAAMS,QAAQhC,QAAUwB,EAAaQ,QAAQhC,MAAjD,CAMA,IAAMiE,EAAiB,GACvBvC,EAAS,IACT9B,GAAW,GAEPyB,EAASW,QAAQkC,QAAUzE,EAAYS,OACzC+D,EAAe5B,KAAK3B,EAAYW,EAASW,QAAQhC,QAG/CuB,EAAMS,QAAQhC,OAChBiE,EAAe5B,KAAK1B,EAAeY,EAAMS,QAAQhC,QAGnDmE,QAAQC,IAAIH,GAAgBI,MAAK,WAC/BpC,IAAME,QAAQ,gCAAiC,CAAED,SAAU,OAC3DE,YAAW,WACTT,EAAQU,KAAK,SACbzC,GAAW,KACV,SACF0E,OAAM,WACPrC,IAAMR,MAAM,yBAA0B,CAAES,SAAU,SACjDqC,SAAQ,oBAxBTtC,IAAMR,MAAM,0BAA2B,CAAES,SAAU,OAqC/C,UACE,eAACQ,EAAA,EAAKE,MAAN,CAAY7D,GAAG,QAAf,UACE,cAAC2D,EAAA,EAAKG,MAAN,oBACA,cAACH,EAAA,EAAKI,QAAN,CAAcC,KAAK,QAAQC,IAAK3B,EAAU4B,UAAQ,EAACuB,aAAe/E,EAAYS,WAEhF,eAACwC,EAAA,EAAKE,MAAN,CAAY7D,GAAG,WAAf,UACE,cAAC2D,EAAA,EAAKG,MAAN,uBACA,cAACH,EAAA,EAAKI,QAAN,CAAcC,KAAK,WAAWC,IAAKzB,EAAOkD,YAAY,6CAExD,eAAC/B,EAAA,EAAKE,MAAN,CAAY7D,GAAG,mBAAf,UACE,cAAC2D,EAAA,EAAKG,MAAN,oCACA,cAACH,EAAA,EAAKI,QAAN,CAAcC,KAAK,WAAWC,IAAKxB,EAAciD,YAAY,6CAE/D,cAACvB,EAAA,EAAD,CAAQC,SAAUxD,EAASoD,KAAK,SAAS/B,UAAU,QAAnD,4BAIN,qBAAKA,UAAU,yBAAf,SACE,cAAC,IAAD,CAAMoC,GAAG,QAAT,0BCxER,IAAMsB,EACW,gBADXA,EAEW,gBAFXA,EAGe,oBAHfA,EAIa,kBAINC,EAAO,CAClBC,KAAM,OACN7F,GAAI,KACJ8F,KAAM,IAGFC,EAAU,SAACC,EAAD,GAA+B,IAArBhC,EAAoB,EAApBA,KAAMiC,EAAc,EAAdA,QAC9B,OAAQjC,GACN,KAAK2B,EACH,MAAO,CACLO,SAAUD,EAAQC,SAClBC,OAAQF,EAAQE,OAChBC,WAAY,GACZC,aAAc,IAElB,KAAKV,EACH,OAAO,2BACFK,GADL,IAEEG,OAAQF,EAAQE,SAEpB,KAAKR,EACH,OAAO,2BACFK,GADL,IAEEK,aAAcJ,EAAQI,eAE1B,KAAKV,EACH,OAAO,2BACFK,GADL,IAEEI,WAAYH,EAAQG,aAGxB,QACE,OAAOJ,IAwEEM,MApER,WAAoD,IAAjCJ,EAAgC,uDAArB,KAAMC,EAAe,uDAAN,KAAM,EAC9BI,qBAAWR,EAAS,CAC5CG,WACAC,SACAE,aAAc,GACdD,WAAY,KAL0C,mBACjDJ,EADiD,KAC1CQ,EAD0C,OAOhCnG,IAAhBK,EAPgD,EAOhDA,YA0DR,OAxDAI,qBAAU,WACR0F,EAAS,CACPxC,KAAM2B,EACNM,QAAS,CAAEC,WAAUC,cAEtB,CAACD,EAAUC,IAEdrF,qBAAU,WACR,GAAgB,MAAZoF,EACF,OAAOM,EAAS,CACdxC,KAAM2B,EACNM,QAAS,CAAEE,OAAQP,KAIvBrG,EAASC,QAAQO,IAAImG,GAAUO,MAC9BnB,MAAK,SAAAvF,GACJyG,EAAS,CACPxC,KAAM2B,EACNM,QAAS,CAAEE,OAAQ5G,EAASO,UAAUC,MAExC2G,QAAQC,IAAIpH,EAASO,UAAUC,OAC9BwF,OAAM,SAACzC,GAER4D,QAAQhE,MAAMI,GACd0D,EAAS,CACPxC,KAAM2B,EACNM,QAAS,CAAEE,OAAQP,UAGtB,CAACM,IAGJpF,qBAAU,WACR,OAAOvB,EAASC,QAAQoH,MAAM,iBAAkB,KAAMV,GAAUU,MAAM,QAAS,KAAMlG,EAAYmG,KAChGC,QAAQ,aACRC,YAAW,SAAAC,GACVR,EAAS,CACPxC,KAAM2B,EACNM,QAAS,CAAEI,aAAcW,EAASC,KAAKC,IAAI3H,EAASO,mBAGvD,CAACoG,EAAUxF,IAGdI,qBAAU,WACR,OAAOvB,EAASG,MAAMkH,MAAM,WAAY,KAAMV,GAAUU,MAAM,QAAS,KAAMlG,EAAYmG,KAExFE,YAAW,SAAAC,GACVR,EAAS,CACPxC,KAAM2B,EACNM,QAAS,CAAEG,WAAYY,EAASC,KAAKC,IAAI3H,EAASO,mBAGrD,CAACoG,EAAUxF,IAEPsF,G,gBCjCMmB,EA1EG,SAAC,GAAuB,IAArBC,EAAoB,EAApBA,cAAoB,EACb3G,oBAAS,GADI,mBAChC4G,EADgC,KACzBC,EADyB,OAEf7G,mBAAS,IAFM,mBAEhCoF,EAFgC,KAE1B0B,EAF0B,KAG/B7G,EAAgBL,IAAhBK,YAEF8G,EAAc,WAClBF,GAAUD,IA4BZ,OACE,qCACE,eAAClD,EAAA,EAAD,CAAQI,QAASiD,EACf9D,QAAQ,kBACR+D,KAAK,KAFP,UAIE,mBAAGxF,UAAU,uBAJf,wBAMA,cAACyF,EAAA,EAAD,CACEC,KAAMN,EAAOO,OAAQJ,EADvB,SAGE,eAAC7D,EAAA,EAAD,CAAMC,SApCS,SAACd,GAGpB,GAFAA,EAAEE,iBAEmB,MAAjBoE,EAAJ,CAIA,IAAMtB,EAAI,YAAOsB,EAActB,MAC5BsB,IAAkBxB,GACnBE,EAAKxC,KAAK,CACRuC,KAAMuB,EAAcvB,KACpB7F,GAAIoH,EAAcpH,KAItBT,EAASC,QAAQqI,IAAI,CACnBhC,KAAMA,EACNiC,eAAgBV,EAAcpH,GAC9B+H,MAAOrH,EAAYmG,IACnBf,KAAMA,EACNkC,UAAWzI,EAASI,wBAEtB4H,EAAQ,IACRC,MAaI,UACE,cAACE,EAAA,EAAMlE,KAAP,UACE,eAACG,EAAA,EAAKE,MAAN,WACE,cAACF,EAAA,EAAKG,MAAN,0BAGA,cAACH,EAAA,EAAKI,QAAN,CACEC,KAAK,OACL/C,MAAO4E,EACPoC,SAAU,SAAAnF,GAAC,OAAIyE,EAAQzE,EAAEoF,OAAOjH,QAChCiD,UAAQ,SAId,eAACwD,EAAA,EAAMS,OAAP,WACE,cAAChE,EAAA,EAAD,CAAQT,QAAQ,YAAYa,QAASiD,EAArC,mBAGA,cAACrD,EAAA,EAAD,CAAQT,QAAQ,UAAUM,KAAK,SAA/B,oCCrDGoE,EAZA,SAAC,GAAgB,IAAdjC,EAAa,EAAbA,OAChB,OACE,eAAChC,EAAA,EAAD,CAAQE,GAAI,CACVgE,SAAS,WAAD,OAAalC,EAAOnG,IAC5BgG,MAAO,CAAEG,WAETzC,QAAQ,kBAAkBxB,MAAO,CAAEE,SAAU,KAAOH,UAAU,gBAAgBqG,GAAIC,IAJpF,UAKE,mBAAG9D,MAAM,kBALX,IAKiC0B,EAAON,S,gBCW7B2C,EAlBS,WACtB,OACE,eAACC,EAAA,EAAD,CACEC,GAAG,QAAQC,OAAO,KADpB,UAGE,eAACF,EAAA,EAAOG,MAAR,CAAcN,GAAIC,IAAMlE,GAAG,GAA3B,UACE,uBAAMpC,UAAU,WAAhB,UAA2B,mBAAGA,UAAU,2BAAxC,QADF,WAGA,cAAC4G,EAAA,EAAD,CAAK5G,UAAU,UAAf,SACE,eAAC4G,EAAA,EAAIN,KAAL,CAAUD,GAAIC,IAAMlE,GAAG,QAAQpC,UAAU,gCAAzC,UACE,mBAAGwC,MAAM,gBADX,oB,QCwBOqE,EAhCW,SAAC,GAAuB,IAArB1B,EAAoB,EAApBA,cACvBtB,EAAOsB,IAAkBxB,EAAO,GAAK,CAACA,GAK1C,OAJIwB,IACFtB,EAAI,sBAAOA,GAAP,YAAgBsB,EAActB,QAIlC,eAACiD,EAAA,EAAD,CAAY9G,UAAU,kBAAkB+G,UAAW,CAAE/G,UAAW,qBAAhE,UAEG6D,EAAKoB,KAAI,SAACf,EAAQ8C,GAAT,OACR,cAACF,EAAA,EAAWG,KAAZ,CAAiBjH,UAAU,+BAA+BC,MAAO,CAAEE,SAAU,KAC3D+G,OAAQZ,IACxBa,UAAW,CACT/E,GAAI,CACFgE,SAAUlC,EAAOnG,GAAP,kBAAuBmG,EAAOnG,IAAO,IAC/CgG,MAAO,CAAEG,OAAO,2BAAKA,GAAN,IAAcL,KAAMA,EAAKuD,MAAM,EAAGJ,QALvD,SASI9C,EAAON,MARJM,EAAOnG,OAYdoH,GACA,cAAC2B,EAAA,EAAWG,KAAZ,CAAiBjH,UAAU,+BAA+BC,MAAO,CAAEE,SAAU,KAAOkH,QAAM,EAA1F,SACIlC,EAAcvB,W,4BCuHX0D,GA7IC,SAAC,GAAuB,IAArBnC,EAAoB,EAApBA,cAAoB,EACS3G,mBAAS,IADlB,mBAC7B+I,EAD6B,KACbC,EADa,KAE7B/I,EAAgBL,IAAhBK,YAqFR,OACE,qCACE,wBAAOuB,UAAU,0CAAjB,UACE,mBAAGwC,MAAM,4BADX,eAEE,uBAAOT,KAAK,OAAOiE,SAvFJ,SAACnF,GACpB,IAAM4G,EAAO5G,EAAEoF,OAAOxI,MAAM,GAM5B,GAAqB,MAAjB0H,GAAiC,MAARsC,EAA7B,CAIA,IAAM1J,EAAK2J,kBAEXF,GAAkB,SAAAG,GAAsB,4BACnCA,GADmC,CACX,CACzB5J,KACA6F,KAAM6D,EAAK7D,KACXgE,SAAU,EACVnH,OAAO,QAIX,IAAMoH,EAAW1C,IAAkBxB,EAAlB,UACZwB,EAActB,KAAKoB,KAAI,SAAA6C,GAAG,OAAIA,EAAIlE,QAAMmE,KAAK,KADjC,YACyCN,EAAK7D,MAD9C,UAEZuB,EAActB,KAAKoB,KAAI,SAAA6C,GAAG,OAAIA,EAAIlE,QAAMmE,KAAK,KAFjC,YAEyC5C,EAAcvB,KAFvD,YAE+D6D,EAAK7D,MAE/EoE,EAAa/J,EAAQ+D,IAAR,iBAAsBvD,EAAYmG,IAAlC,YAAyCiD,IAAYI,IAAIR,GAE5EO,EAAWE,GAAG,iBAAiB,SAAAnD,GAC7B,IAAM6C,EAAW7C,EAASoD,iBAAmBpD,EAASqD,WACtDZ,GAAkB,SAAAG,GAChB,OAAOA,EAAuB1C,KAAI,SAAAoD,GAChC,OAAIA,EAActK,KAAOA,EAChB,2BAAKsK,GAAZ,IAA2BT,SAAUA,IAGhCS,WAGV,WAEDb,GAAkB,SAAAG,GAChB,OAAOA,EAAuB1C,KAAI,SAAAoD,GAChC,OAAIA,EAActK,KAAOA,EAChB,2BAAIsK,GAAX,IAA0B5H,OAAO,IAE1B4H,WAIZ,WAEDb,GAAkB,SAAAG,GAChB,OAAOA,EAAuBW,QAAO,SAAAD,GACnC,OAAOA,EAActK,KAAOA,QAMhCiK,EAAWjD,SAAS/C,IAAIuG,iBAAiBlF,MAAK,SAAAmF,GAC5ClL,EAASG,MACRkH,MAAM,OAAQ,KAAM8C,EAAK7D,MACzBe,MAAM,QAAS,KAAOlG,EAAYmG,KAClCD,MAAM,WAAY,KAAMQ,EAAcpH,IACtCyG,MACAnB,MAAK,SAAAoF,GACJ,IAAMC,EAAeD,EAAczD,KAAK,GACpC0D,EACFA,EAAa1G,IAAI2G,OAAO,CAAEH,QAE1BlL,EAASG,MAAMmI,IAAI,CACjB4C,MACA5E,KAAM6D,EAAK7D,KACXmC,UAAWzI,EAASI,sBACpBuG,SAAUkB,EAAcpH,GACxB+H,MAAOrH,EAAYmG,iBAYzB3E,MAAO,CACL2I,QAAS,EAGTC,QAAS,aAIZtB,EAAeuB,OAAS,GACvBC,IAASC,aACP,qBAAK/I,MAAO,CACVgJ,SAAU,WACVC,OAAQ,OACRC,MAAO,OACPhJ,SAAU,KAJZ,SAMIoH,EAAetC,KAAI,SAAAwC,GAAI,OACvB,eAAC2B,GAAA,EAAD,CACEC,QAAS,WACP7B,GAAkB,SAAAG,GAChB,OAAOA,EAAuBW,QAAO,SAAAD,GACnC,OAAOA,EAActK,KAAO0J,EAAK1J,UAJzC,UASE,cAACqL,GAAA,EAAME,OAAP,CAActJ,UAAU,8BAA8BuJ,YAAa9B,EAAKhH,MAAxE,SACIgH,EAAK7D,OAET,cAACwF,GAAA,EAAM7H,KAAP,UACE,cAACiI,GAAA,EAAD,CACEC,UAAYhC,EAAKhH,MACjBgB,QAAUgG,EAAKhH,MAAQ,SAAW,UAClCiJ,IAAMjC,EAAKhH,MAAQ,IAAsB,IAAhBgH,EAAKG,SAC9B+B,MACElC,EAAKhH,MAAQ,QAAb,UAA0BmJ,KAAKC,MAAsB,IAAhBpC,EAAKG,UAA1C,WAlBKH,EAAK1J,SAyBtB+L,SAASC,UCnIJC,GARF,SAAC,GAAc,IAAZvC,EAAW,EAAXA,KACd,OACE,oBAAGwC,KAAMxC,EAAKe,IAAKvC,OAAO,SAAShG,MAAO,CAAEE,SAAU,KAAOH,UAAU,wCAAvE,UACE,mBAAGwC,MAAM,oBADX,IACoCiF,EAAK7D,SCgD9BsG,GA3CG,WAAO,IACfjG,EAAakG,cAAblG,SADc,EAECmG,cAAfrG,MAFc,EAGuBM,EAAUJ,QAHjC,MAEN,GAFM,GAGiDC,QAA/DA,EAHc,EAGdA,OAAQE,EAHM,EAGNA,aAAcD,EAHR,EAGQA,WAE9B,OACE,qCACE,cAAC,EAAD,IACA,eAACpE,EAAA,EAAD,CAAWsK,OAAK,EAAhB,UACE,sBAAKrK,UAAU,iCAAf,6BAEE,cAAC,EAAD,CAAmBmF,cAAgBjB,IACnC,cAAC,GAAD,CAASiB,cAAgBjB,IACzB,cAAC,EAAD,CAAWiB,cAAgBjB,OAG3BE,EAAa0E,OAAS,GACtB,qBAAKwB,UAAU,mBAAmBrK,MAAO,CAAE4I,QAAS,OAAQ0B,cAAe,MAAOC,SAAU,QAA5F,SACIpG,EAAaa,KAAI,SAAAwF,GAAW,OAC5B,qBAA0BxK,MAAO,CAAEE,SAAU,KAAOH,UAAU,MAA9D,SACE,cAAC,EAAD,CAAQkE,OAAQuG,KADRA,EAAY1M,SAO1BqG,EAAa0E,OAAS,GAAK3E,EAAW2E,OAAS,GAAK,uBAEpD3E,EAAW2E,OAAS,GACpB,qBAAKwB,UAAU,mBAAmBrK,MAAO,CAAE4I,QAAS,OAAQ0B,cAAe,MAAOC,SAAU,QAA5F,SACIrG,EAAWc,KAAI,SAAAyF,GAAS,OACxB,qBAAwBzK,MAAO,CAAEE,SAAU,KAAOH,UAAU,MAA5D,SACE,cAAC,GAAD,CAAMyH,KAAMiD,KADJA,EAAU3M,gBCNnB4M,OAxBf,WACE,OACE,cAAC,IAAD,CAAQC,SAAU/N,UAAlB,SACE,cAACyB,EAAD,UACE,eAAC,IAAD,WAEE,cAAC,EAAD,CAAcuM,OAAK,EAAChH,KAAK,IAAIlB,UAAWuH,KACxC,cAAC,EAAD,CAAcW,OAAK,EAAChH,KAAK,oBAAoBlB,UAAWuH,KAGxD,cAAC,EAAD,CAAcrG,KAAK,QAAQlB,UAAWN,IACtC,cAAC,EAAD,CAAcwB,KAAK,kBAAkBlB,UAAWK,IAGhD,cAAC,IAAD,CAAOa,KAAK,UAAUlB,UAAWvC,IACjC,cAAC,IAAD,CAAOyD,KAAK,UAAUlB,UAAWJ,IACjC,cAAC,IAAD,CAAOsB,KAAK,SAASlB,UAAWI,Y,YCtB1CgG,IAASlG,OACP,cAAC,IAAMiI,WAAP,UACE,cAAC,GAAD,MAEFhB,SAASiB,eAAe,W","file":"static/js/main.87e082be.chunk.js","sourcesContent":["import firebase from 'firebase/app';\nimport 'firebase/auth';\nimport 'firebase/firestore';\nimport 'firebase/storage';\n\nconst app = firebase.initializeApp({\n    apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\n    authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,\n    projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\n    storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\n    messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,\n    appId: process.env.REACT_APP_FIREBASE_APP_ID,\n    measurementId: process.env.REACT_APP_FIREBASE_MEASUREMENT_ID\n});\n\n// authentication\nexport const auth = app.auth();\nexport default app;\n\n// database\nconst firestore = app.firestore();\nexport const database = { // make object out of only required firestore data\n    folders: firestore.collection('folders'),\n    files: firestore.collection('files'),\n    getCurrentTimestamp: firebase.firestore.FieldValue.serverTimestamp,\n    formatDoc: doc => {\n        return { id: doc.id, ...doc.data() }\n    }\n}\n\n// storage\nexport const storage = app.storage()","import React, { useContext, useState, createContext, useEffect } from 'react';\nimport { auth } from \"../firebase\";\n\nconst AuthContext = createContext();\n\nexport function useAuth() {\n    return useContext(AuthContext);\n}\n\nexport function AuthProvider({ children }) {\n    const [currentUser, setCurrentUser] = useState();\n    const [loading, setLoading] = useState(true);\n\n    function signUp(email, pw) {\n        return auth.createUserWithEmailAndPassword(email, pw);\n    }\n\n    function signIn(email, pw) {\n        return auth.signInWithEmailAndPassword(email, pw);\n    }\n\n    function signOut() {\n        return auth.signOut();\n    }\n\n    function resetPassword(email) {\n        return auth.sendPasswordResetEmail(email);\n    }\n\n    function updateEmail(email) {\n        return currentUser.updateEmail(email);\n    }\n\n    function updatePassword(password) {\n        return currentUser.updatePassword(password);\n    }\n\n    useEffect(() => {\n        const unsubscribe = auth.onAuthStateChanged(user => {\n            setCurrentUser(user); // initially set user \n            setLoading(false); // then set loading to false\n        })\n\n        return unsubscribe;\n    }, []);\n\n    \n    const value = { currentUser, signUp, signIn, signOut, resetPassword, updateEmail, updatePassword };\n    return (\n        <AuthContext.Provider value={value}>\n            {!loading && children}\n        </AuthContext.Provider>\n    )\n}\n","import React from 'react';\r\nimport { Container } from 'react-bootstrap';\r\n\r\nconst CenteredContainer = ({ children }) => {\r\n  return (\r\n    <>\r\n      <Container className=\"d-flex align-items-center justify-content-center\"\r\n        style={{ minHeight: \"100vh\" }}>\r\n        <div className=\"w-100\" style={{ maxWidth: '400px' }}>\r\n          { children }\r\n        </div>\r\n      </Container>\r\n    </>\r\n  );\r\n}\r\n \r\nexport default CenteredContainer;","import React, { useRef, useState } from 'react';\nimport { Card, Form, Button, Alert } from 'react-bootstrap';\nimport { Link, useHistory } from 'react-router-dom';\nimport { useAuth } from '../../contexts/AuthContext';\nimport toast, { Toaster } from 'react-hot-toast';\nimport CenteredContainer from '../CenteredContainer';\n\nexport default function Signup() {\n  const emailRef = useRef();\n  const pwRef = useRef();\n  const pwConfirmRef = useRef();\n  const { signUp } = useAuth();\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n  const history = useHistory();\n\n  async function handleSubmit(e) {\n    e.preventDefault();\n\n    if (pwRef.current.value !== pwConfirmRef.current.value) {\n      // pw does not match pwConfirm\n      toast.error(\"Passwords do not match!\", { duration: 3000 });\n      return;\n    }\n\n  \n    try {\n      setError(\"\"); // Reset\n      setLoading(true);\n      await signUp(emailRef.current.value, pwRef.current.value);\n      toast.success(\"Account created!\", { duration: 1500 });\n      setTimeout(() => {\n        history.push(\"/user\"); // redirect to dashboard page once successful\n      }, 1500);\n    } catch {\n      toast.error(\"Failed to create account.\", { duration: 4000 });\n    }\n    setLoading(false);\n  }\n    \n  return (\n    <CenteredContainer>\n      <Toaster />\n      <Card>\n        <Card.Body>\n          <h3 className=\"text-center mb-4\">Sign Up</h3>\n          { error && \n            <Alert variant=\"danger\">{error}</Alert>\n          }\n          <Form onSubmit={handleSubmit}>\n            <Form.Group id=\"email\">\n              <Form.Label>Email</Form.Label>\n              <Form.Control type=\"email\" ref={emailRef} required />\n            </Form.Group>\n            <Form.Group id=\"password\">\n              <Form.Label>Password</Form.Label>\n              <Form.Control type=\"password\" ref={pwRef} required />\n            </Form.Group>\n            <Form.Group id=\"password-confirm\">\n              <Form.Label>Password Confirmation</Form.Label>\n              <Form.Control type=\"password\" ref={pwConfirmRef} required />\n            </Form.Group>\n            <Button disabled={loading} type=\"submit\" className=\"w-100\">Sign Up</Button>\n          </Form>\n        </Card.Body>\n      </Card>\n      <div className=\"w-100 text-center mt-2\">\n          Already have an account? <Link to=\"/signin\">Sign In</Link>\n      </div>  \n    </CenteredContainer>\n  )\n}\n","import React, { useState } from 'react';\r\nimport { Card, Alert } from 'react-bootstrap';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport toast, { Toaster } from 'react-hot-toast';\r\nimport CenteredContainer from '../CenteredContainer';\r\n\r\nconst Profile = () => {\r\n\r\n  async function handleSignOut() {\r\n    setError(\"\"); // reset\r\n\r\n    try {\r\n      await signOut();\r\n      toast.success(\"Signed out!\", { duration: 1500 });\r\n      setTimeout(() => {\r\n        \r\n      }, 1500);\r\n      history.push(\"/signin\"); // redirect to dashboard page once successful\r\n    } catch {\r\n      toast.error(\"Failed to sign out.\", { duration: 3000 });\r\n    }\r\n    \r\n  }\r\n\r\n  const [error, setError] = useState(\"\");\r\n  const { currentUser, signOut } = useAuth();\r\n  const history = useHistory();\r\n\r\n  return (  \r\n    <CenteredContainer>\r\n      <Toaster />\r\n      <Card>\r\n        <Card.Body>\r\n          <h3 className=\"text-center mb-4\">Profile</h3>\r\n          { error && \r\n            <Alert variant=\"danger\">{error}</Alert>\r\n          }\r\n          <strong>Email:</strong> { currentUser.email}\r\n          <Link to=\"/update-profile\" className=\"btn btn-info w-100 mt-3\">Update Profile</Link>\r\n          <Link to=\"/\" className=\"btn btn-primary w-100 mt-3\">Back to Dashboard</Link>\r\n          <Link to=\"\" className=\"btn btn-outline-danger w-100 mt-3\" onClick={handleSignOut}>Sign Out</Link>\r\n\r\n          {/* <Button className=\"btn btn-outline-danger w-100 mt-3\" variant=\"link\" style={{ color: \"red\" }} onClick={handleSignOut}>Sign Out</Button> */}\r\n        </Card.Body>\r\n      </Card>\r\n      <div className=\"w-100 text-center mt-2\">\r\n        \r\n      </div>  \r\n    </CenteredContainer>\r\n  );\r\n}\r\n \r\nexport default Profile;","import React, { useRef, useState } from 'react';\r\nimport { Card, Form, Button, Alert } from 'react-bootstrap';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport toast, { Toaster } from 'react-hot-toast';\r\nimport CenteredContainer from '../CenteredContainer';\r\n\r\nexport default function Signin() {\r\n  const emailRef = useRef();\r\n  const pwRef = useRef();\r\n  const { signIn } = useAuth();\r\n  const [error, setError] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const history = useHistory();\r\n\r\n  async function handleSubmit(e) {\r\n    e.preventDefault();\r\n  \r\n    try {\r\n      setError(\"\"); // Reset\r\n      setLoading(true);\r\n      await signIn(emailRef.current.value, pwRef.current.value);\r\n      toast.success(\"Signed in!\", { duration: 1500 });\r\n      setTimeout(() => {\r\n        history.push(\"/\"); // redirect to dashboard page once successful\r\n        setLoading(false);\r\n      }, 1500);\r\n    } catch {\r\n      toast.error(\"Failed to sign in.\", { duration: 3000 });\r\n    }\r\n    setLoading(false);\r\n  }\r\n    \r\n  return (\r\n    <CenteredContainer>\r\n      <Toaster />\r\n      <h1 className=\"text-center mb-5 title\"><span className=\"emphasis\"><i class=\"fas fa-code title-logo\"></i> k</span>Drive</h1>\r\n      <Card>\r\n        <Card.Body>\r\n          <h3 className=\"text-center mb-4\">Sign In</h3>\r\n          { error && \r\n            <Alert variant=\"danger\">{error}</Alert>\r\n          }\r\n          <Form onSubmit={handleSubmit}>\r\n            <Form.Group id=\"email\">\r\n              <Form.Label>Email</Form.Label>\r\n              <Form.Control type=\"email\" ref={emailRef} required />\r\n            </Form.Group>\r\n            <Form.Group id=\"password\">\r\n              <Form.Label>Password</Form.Label>\r\n              <Form.Control type=\"password\" ref={pwRef} required />\r\n            </Form.Group>\r\n            <Button disabled={loading} type=\"submit\" className=\"w-100\">Sign In</Button>\r\n          </Form>\r\n          <div className=\"w-100 text-center mt-4\">\r\n            <Link to=\"/reset\">Forgot password?</Link>\r\n          </div>\r\n        </Card.Body>\r\n      </Card>\r\n      <div className=\"w-100 text-center mt-2\">\r\n        Don't have an account? <Link to=\"/signup\">Sign Up</Link>\r\n      </div>  \r\n    </CenteredContainer>\r\n  )\r\n}\r\n","import React from 'react';\r\nimport { Redirect, Route } from 'react-router-dom';\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\n\r\nconst PrivateRoute = ({ component: Component, ...otherComponents }) => {\r\n  const { currentUser } = useAuth();\r\n\r\n  return (  \r\n    <Route\r\n      {...otherComponents}\r\n      render = {props => {\r\n        return currentUser ? <Component {...props} /> : <Redirect to=\"/signin\" />\r\n      }}\r\n    >\r\n\r\n    </Route>\r\n  );\r\n}\r\n \r\nexport default PrivateRoute;","import React, { useRef, useState } from 'react';\r\nimport { Card, Form, Button, Alert } from 'react-bootstrap';\r\nimport toast, { Toaster } from 'react-hot-toast';\r\nimport { Link } from 'react-router-dom';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport CenteredContainer from '../CenteredContainer';\r\n\r\nexport default function PasswordReset() {\r\n  const emailRef = useRef();\r\n  const { resetPassword } = useAuth();\r\n  const [error, setError] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  async function handleSubmit(e) {\r\n    e.preventDefault();\r\n  \r\n    try {\r\n      setError(\"\"); // Reset\r\n      setLoading(true);\r\n      await resetPassword(emailRef.current.value);\r\n      toast.success(\"Password reset e-mail has been sent!\", { duration: 4000 });\r\n    } catch {\r\n      setError(\"Please double check the E-mail address.\");\r\n    }\r\n    setLoading(false);\r\n  }\r\n    \r\n  return (\r\n    <CenteredContainer>\r\n      <Toaster />\r\n      <Card>\r\n        <Card.Body>\r\n          <h3 className=\"text-center mb-4\">Reset Password</h3>\r\n          { error && \r\n            <Alert variant=\"danger\">{error}</Alert>\r\n          }\r\n          <Form onSubmit={handleSubmit}>\r\n            <Form.Group id=\"email\">\r\n              <Form.Label>Email</Form.Label>\r\n              <Form.Control type=\"email\" ref={emailRef} required />\r\n            </Form.Group>\r\n            <Button disabled={loading} type=\"submit\" className=\"w-100\">Reset Password</Button>\r\n          </Form>\r\n          <div className=\"w-100 text-center mt-4\">\r\n            <Link to=\"/signin\">Sign In</Link>\r\n          </div>\r\n        </Card.Body>\r\n      </Card>\r\n      <div className=\"w-100 text-center mt-2\">\r\n        Don't have an account? <Link to=\"/signup\">Sign Up</Link>\r\n      </div>  \r\n    </CenteredContainer>\r\n  )\r\n}\r\n","import React, { useRef, useState } from 'react';\r\nimport { Card, Form, Button, Alert } from 'react-bootstrap';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport toast, { Toaster } from 'react-hot-toast';\r\nimport CenteredContainer from '../CenteredContainer';\r\n\r\nexport default function UpdateProfile() {\r\n  const emailRef = useRef();\r\n  const pwRef = useRef();\r\n  const pwConfirmRef = useRef();\r\n  const { currentUser, updateEmail, updatePassword } = useAuth();\r\n  const [error, setError] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const history = useHistory();\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n\r\n    if (pwRef.current.value !== pwConfirmRef.current.value) {\r\n      // pw does not match pwConfirm\r\n      toast.error(\"Passwords do not match!\", { duration: 3000 });\r\n      return;\r\n    }\r\n\r\n    const handlePromises = []; // init\r\n    setError(\"\"); // Reset\r\n    setLoading(true);\r\n\r\n    if (emailRef.current.Value !== currentUser.email) {\r\n      handlePromises.push(updateEmail(emailRef.current.value));\r\n    }\r\n\r\n    if (pwRef.current.value) { // already guaranteed that pw/pwRef match\r\n      handlePromises.push(updatePassword(pwRef.current.value));\r\n    }\r\n\r\n    Promise.all(handlePromises).then(() => {\r\n      toast.success(\"Profile successfully updated!\", { duration: 1500 });\r\n      setTimeout(() => {\r\n        history.push('/user');\r\n        setLoading(false)\r\n      }, 1500);\r\n    }).catch(() => {\r\n      toast.error(\"Profile update failed.\", { duration: 4000 });\r\n    }).finally(() => {\r\n    });\r\n  }\r\n    \r\n  return (\r\n    <CenteredContainer>\r\n      <Toaster />\r\n      <Card>\r\n        <Card.Body>\r\n          <h3 className=\"text-center mb-4\">Update Profile</h3>\r\n          { error && \r\n            <Alert variant=\"danger\">{error}</Alert>\r\n          }\r\n          <Form onSubmit={handleSubmit}>\r\n            <Form.Group id=\"email\">\r\n              <Form.Label>Email</Form.Label>\r\n              <Form.Control type=\"email\" ref={emailRef} required defaultValue={ currentUser.email } />\r\n            </Form.Group>\r\n            <Form.Group id=\"password\">\r\n              <Form.Label>Password</Form.Label>\r\n              <Form.Control type=\"password\" ref={pwRef} placeholder=\"Leave blank to keep the same password\" />\r\n            </Form.Group>\r\n            <Form.Group id=\"password-confirm\">\r\n              <Form.Label>Password Confirmation</Form.Label>\r\n              <Form.Control type=\"password\" ref={pwConfirmRef} placeholder=\"Leave blank to keep the same password\" />\r\n            </Form.Group>\r\n            <Button disabled={loading} type=\"submit\" className=\"w-100\">Update</Button>\r\n          </Form>\r\n        </Card.Body>\r\n      </Card>\r\n      <div className=\"w-100 text-center mt-2\">\r\n        <Link to=\"/user\">Go back</Link>\r\n      </div>  \r\n    </CenteredContainer>\r\n  )\r\n}\r\n","import { useEffect, useReducer } from \"react\";\r\nimport { useAuth } from \"../contexts/AuthContext\";\r\nimport { database } from \"../firebase\";\r\n\r\nconst ACTIONS = {\r\n  SELECT_FOLDER: 'select-folder',\r\n  UPDATE_FOLDER: 'update-folder',\r\n  SET_CHILD_FOLDERS: 'set-child-folders',\r\n  SET_CHILD_FILES: 'set-child-files'\r\n}\r\n\r\n// root folder\r\nexport const ROOT = {\r\n  name: \"Root\",\r\n  id: null,\r\n  path: []\r\n}\r\n\r\nconst reducer = (state, { type, payload }) => {\r\n  switch (type) {\r\n    case ACTIONS.SELECT_FOLDER:\r\n      return {\r\n        folderId: payload.folderId,\r\n        folder: payload.folder,\r\n        childFiles: [],\r\n        childFolders: []\r\n      }\r\n    case ACTIONS.UPDATE_FOLDER:\r\n      return {\r\n        ...state,\r\n        folder: payload.folder\r\n      }\r\n    case ACTIONS.SET_CHILD_FOLDERS:\r\n      return {\r\n        ...state,\r\n        childFolders: payload.childFolders\r\n      }\r\n    case ACTIONS.SET_CHILD_FILES:\r\n      return {\r\n        ...state,\r\n        childFiles: payload.childFiles\r\n      }\r\n\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport function UseFolder(folderId = null, folder = null) {\r\n  const [state, dispatch] = useReducer(reducer, {\r\n    folderId,\r\n    folder,\r\n    childFolders: [],\r\n    childFiles: []\r\n  })\r\n  const { currentUser } = useAuth();\r\n\r\n  useEffect(() => {\r\n    dispatch({\r\n      type: ACTIONS.SELECT_FOLDER,\r\n      payload: { folderId, folder }\r\n    });\r\n  }, [folderId, folder])\r\n\r\n  useEffect(() => {\r\n    if (folderId == null) {\r\n      return dispatch({\r\n        type: ACTIONS.UPDATE_FOLDER,\r\n        payload: { folder: ROOT }\r\n      })\r\n    }\r\n\r\n    database.folders.doc(folderId).get()\r\n    .then(doc => {\r\n      dispatch({\r\n        type: ACTIONS.UPDATE_FOLDER,\r\n        payload: { folder: database.formatDoc(doc) }\r\n      })\r\n      console.log(database.formatDoc(doc))\r\n    }).catch((e) => {\r\n      // folder get error\r\n      console.error(e)\r\n      dispatch({\r\n        type: ACTIONS.UPDATE_FOLDER,\r\n        payload: { folder: ROOT }\r\n      })\r\n    })\r\n  }, [folderId])\r\n\r\n  // get folders\r\n  useEffect(() => {\r\n    return database.folders.where(\"parentFolderId\", \"==\", folderId).where(\"owner\", \"==\", currentUser.uid)\r\n    .orderBy(\"createdAt\")\r\n    .onSnapshot(snapshot => {\r\n      dispatch({\r\n        type: ACTIONS.SET_CHILD_FOLDERS,\r\n        payload: { childFolders: snapshot.docs.map(database.formatDoc) }\r\n      })\r\n    })\r\n  }, [folderId, currentUser])\r\n\r\n  // get files\r\n  useEffect(() => {\r\n    return database.files.where(\"folderId\", \"==\", folderId).where(\"owner\", \"==\", currentUser.uid)\r\n    // .orderBy(\"createdAt\")\r\n    .onSnapshot(snapshot => {\r\n      dispatch({\r\n        type: ACTIONS.SET_CHILD_FILES,\r\n        payload: { childFiles: snapshot.docs.map(database.formatDoc) }\r\n      })\r\n    })\r\n  }, [folderId, currentUser])\r\n\r\n  return state;\r\n}\r\n \r\nexport default UseFolder;","import React, { useState } from 'react';\r\nimport { Button, Modal, Form } from 'react-bootstrap';\r\nimport { database } from '../../firebase'\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { ROOT } from '../../hooks/UseFolder';\r\n\r\nconst AddFolder = ({ currentFolder }) => {\r\n  const [modal, setModal] = useState(false); // modal = true if modal is open, false otherwise\r\n  const [name, setName] = useState(\"\"); // state values for add folder name\r\n  const { currentUser } = useAuth();\r\n\r\n  const toggleModal = () => {\r\n    setModal(!modal);\r\n  }\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault(); // stop refresh\r\n\r\n    if (currentFolder == null) {\r\n      return\r\n    }\r\n\r\n    const path = [...currentFolder.path]\r\n    if(currentFolder !== ROOT) {\r\n      path.push({ \r\n        name: currentFolder.name,\r\n        id: currentFolder.id\r\n      })\r\n    }\r\n\r\n    database.folders.add({\r\n      name: name,\r\n      parentFolderId: currentFolder.id,\r\n      owner: currentUser.uid,\r\n      path: path,\r\n      createdAt: database.getCurrentTimestamp()\r\n    })\r\n    setName(\"\");\r\n    toggleModal();\r\n  }\r\n  return (\r\n    <>\r\n      <Button onClick={toggleModal}\r\n        variant=\"outline-success\"\r\n        size=\"sm\"\r\n      >\r\n        <i className=\"fas fa-folder-plus\"></i> Create New Folder\r\n      </Button>\r\n      <Modal\r\n        show={modal} onHide={toggleModal}\r\n      >\r\n        <Form onSubmit={handleSubmit}>\r\n          <Modal.Body>\r\n            <Form.Group>\r\n              <Form.Label>\r\n                Folder Name\r\n              </Form.Label>\r\n              <Form.Control \r\n                type=\"text\"\r\n                value={name}\r\n                onChange={e => setName(e.target.value)}\r\n                required\r\n              />\r\n            </Form.Group>\r\n          </Modal.Body>\r\n          <Modal.Footer>\r\n            <Button variant=\"secondary\" onClick={toggleModal}>\r\n              Close\r\n            </Button>\r\n            <Button variant=\"success\" type=\"submit\">\r\n              Add Folder\r\n            </Button>\r\n            \r\n          </Modal.Footer>\r\n        </Form>\r\n      </Modal>\r\n    </>\r\n  );\r\n}\r\n \r\nexport default AddFolder;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Button } from 'react-bootstrap';\r\n\r\nconst Folder = ({ folder }) => {\r\n  return (\r\n    <Button to={{\r\n      pathname: `/folder/${folder.id}`,\r\n      state: { folder }\r\n    }}\r\n      variant=\"outline-warning\" style={{ maxWidth: 150 }} className=\"text-truncate\" as={Link}>\r\n      <i class=\"fas fa-folder\"></i> {folder.name}\r\n    </Button>\r\n  );\r\n}\r\n \r\nexport default Folder;","import React from 'react';\r\nimport { Navbar, Nav } from 'react-bootstrap';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst NavbarComponent = () => {\r\n  return (  \r\n    <Navbar\r\n      bg=\"light\" expand=\"lg\"\r\n    >\r\n      <Navbar.Brand as={Link} to=\"\">\r\n        <span className=\"emphasis\"><i className=\"fas fa-code title-logo\"></i> k</span>Drive\r\n      </Navbar.Brand>\r\n      <Nav className=\"ml-auto\">\r\n        <Nav.Link as={Link} to=\"/user\" className=\"btn btn-outline-secondary p-2\">\r\n          <i class=\"fas fa-user\"></i> Profile\r\n        </Nav.Link>\r\n      </Nav>\r\n\r\n    </Navbar>\r\n  );\r\n}\r\n \r\nexport default NavbarComponent;","import React from 'react';\r\nimport { Breadcrumb } from 'react-bootstrap';\r\nimport { Link } from 'react-router-dom';\r\nimport { ROOT } from '../../hooks/UseFolder';\r\n\r\nconst FolderBreadCrumbs = ({ currentFolder }) => {\r\n  let path = currentFolder === ROOT ? [] : [ROOT]\r\n  if (currentFolder) {\r\n    path = [...path, ...currentFolder.path]\r\n  }\r\n\r\n  return (\r\n    <Breadcrumb className=\"flex-grow-1 m-0\" listProps={{ className: \"bg-white pl-0 m-0\" }}>\r\n\r\n      {path.map((folder, index) => (\r\n        <Breadcrumb.Item className=\"text-truncate d-inline-block\" style={{ maxWidth: 150 }} \r\n          key={folder.id} linkAs={Link} \r\n          linkProps={{ \r\n            to: {\r\n              pathname: folder.id ? `/folder/${folder.id}` : '/',\r\n              state: { folder: {...folder, path: path.slice(1, index) }}\r\n            }\r\n          }}\r\n        >\r\n          { folder.name }\r\n        </Breadcrumb.Item>\r\n      ))}\r\n\r\n      { currentFolder && (\r\n        <Breadcrumb.Item className=\"text-truncate d-inline-block\" style={{ maxWidth: 200 }} active>\r\n          { currentFolder.name }\r\n        </Breadcrumb.Item>\r\n      )}\r\n    </Breadcrumb>\r\n  );\r\n}\r\n \r\nexport default FolderBreadCrumbs;","import React, { useState } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { storage, database } from '../../firebase';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { ROOT } from '../../hooks/UseFolder';\r\nimport { uuid } from 'uuidv4';\r\nimport { ProgressBar, Toast } from 'react-bootstrap';\r\n\r\nconst AddFile = ({ currentFolder }) => {\r\n  const [ uploadingFiles, setUploadingFiles ] = useState([]);\r\n  const { currentUser } = useAuth();\r\n\r\n  const handleUpload = (e) => {\r\n    const file = e.target.files[0];\r\n\r\n    // if (!currentFolder || !file) {\r\n    //   return\r\n    // }\r\n\r\n    if (currentFolder == null || file == null) {\r\n      return\r\n    }\r\n\r\n    const id = uuid(); // generate random id via uuid\r\n\r\n    setUploadingFiles(previousUploadingFiles => [\r\n      ...previousUploadingFiles, {\r\n        id,\r\n        name: file.name,\r\n        progress: 0,\r\n        error: false\r\n      }\r\n    ])\r\n\r\n    const filePath = currentFolder === ROOT \r\n    ? `${currentFolder.path.map(obj => obj.name).join(\"/\")}/${file.name}` \r\n    : `${currentFolder.path.map(obj => obj.name).join(\"/\")}/${currentFolder.name}/${file.name}`\r\n\r\n    const uploadTask = storage.ref(`/files/${currentUser.uid}/${filePath}`).put(file);\r\n\r\n    uploadTask.on('state_changed', snapshot => {\r\n      const progress = snapshot.bytesTransferred / snapshot.totalBytes;\r\n      setUploadingFiles(previousUploadingFiles => {\r\n        return previousUploadingFiles.map(uploadingFile => {\r\n          if (uploadingFile.id === id) {\r\n            return { ...uploadingFile, progress: progress }\r\n          }\r\n\r\n          return uploadingFile;\r\n        })\r\n      })\r\n    }, () => {\r\n      // err\r\n      setUploadingFiles(previousUploadingFiles => {\r\n        return previousUploadingFiles.map(uploadingFile => {\r\n          if (uploadingFile.id === id) {\r\n            return {...uploadingFile, error: true }\r\n          } else {\r\n            return uploadingFile;\r\n          }\r\n        })\r\n      })\r\n    }, () => {\r\n      // complete\r\n      setUploadingFiles(previousUploadingFiles => {\r\n        return previousUploadingFiles.filter(uploadingFile => {\r\n          return uploadingFile.id !== id\r\n        })\r\n      })\r\n\r\n      // check if file with same name exists at the directory of upload\r\n      // if so, overwrite\r\n      uploadTask.snapshot.ref.getDownloadURL().then(url => {\r\n        database.files\r\n        .where(\"name\", \"==\", file.name)\r\n        .where(\"owner\", \"==\",  currentUser.uid)\r\n        .where(\"folderId\", \"==\", currentFolder.id)\r\n        .get()\r\n        .then(existingFiles => {\r\n          const existingFile = existingFiles.docs[0];\r\n          if (existingFile) {\r\n            existingFile.ref.update({ url });\r\n          } else {\r\n            database.files.add({\r\n              url,\r\n              name: file.name,\r\n              createdAt: database.getCurrentTimestamp(),\r\n              folderId: currentFolder.id,\r\n              owner: currentUser.uid\r\n            })\r\n          }\r\n        })\r\n      })\r\n    })\r\n  }\r\n  return (  \r\n    <>\r\n      <label className=\"btn btn-outline-success btn-sm m-0 mr-2\">\r\n        <i class=\"fas fa-cloud-upload-alt\"></i> Upload File\r\n        <input type=\"file\" onChange={handleUpload} \r\n        style={{ \r\n          opacity: 0,\r\n          // position: \"absolute\",\r\n          // top: -500\r\n          display: \"none\"\r\n        }}\r\n        />\r\n      </label>\r\n      {uploadingFiles.length > 0 && \r\n        ReactDOM.createPortal(\r\n          <div style={{\r\n            position: 'absolute',\r\n            bottom: '1rem',\r\n            right: '1rem',\r\n            maxWidth: 250\r\n          }}>\r\n            { uploadingFiles.map(file => (\r\n              <Toast key={ file.id }\r\n                onClose={() => {\r\n                  setUploadingFiles(previousUploadingFiles => {\r\n                    return previousUploadingFiles.filter(uploadingFile => {\r\n                      return uploadingFile.id !== file.id;\r\n                    })\r\n                  })\r\n                }}\r\n              >\r\n                <Toast.Header className=\"text-truncate w-100 d-block\" closeButton={file.error}>\r\n                  { file.name }\r\n                </Toast.Header>\r\n                <Toast.Body>\r\n                  <ProgressBar\r\n                    animated={ !file.error}\r\n                    variant={ file.error ? 'danger' : 'primary' }\r\n                    now={ file.error ? 100 : file.progress * 100 }\r\n                    label={\r\n                      file.error ? \"Error\" : `${Math.round(file.progress * 100)}%`\r\n                    }\r\n                  />\r\n                </Toast.Body>\r\n              </Toast>\r\n            ))}\r\n          </div>,\r\n          document.body\r\n        )\r\n      }\r\n    </>\r\n  );\r\n}\r\n \r\nexport default AddFile;","/* eslint-disable react/jsx-no-target-blank */\r\nimport React from 'react';\r\n\r\nconst File = ({ file }) => {\r\n  return (  \r\n    <a href={file.url} target=\"_blank\" style={{ maxWidth: 200 }} className=\"btn btn-outline-primary text-truncate\">\r\n      <i class=\"fas fa-file-alt\"></i> { file.name }\r\n    </a>\r\n  );\r\n}\r\n \r\nexport default File;\r\n","import React from 'react';\r\nimport { Container } from 'react-bootstrap';\r\nimport UseFolder from '../../hooks/UseFolder';\r\nimport AddFolder from './AddFolder';\r\nimport Folder from './Folder';\r\nimport Navbar from './Navbar';\r\nimport { useParams, useLocation } from 'react-router-dom';\r\nimport FolderBreadCrumbs from './FolderBreadCrumbs';\r\nimport AddFile from './AddFile';\r\nimport File from './File';\r\n\r\nconst Dashboard = () => {\r\n  const { folderId } = useParams();\r\n  const { state = {} } = useLocation();\r\n  const { folder, childFolders, childFiles } = UseFolder(folderId, state.folder);\r\n\r\n  return (\r\n    <>\r\n      <Navbar />\r\n      <Container fluid>\r\n        <div className=\"d-flex align-items-center pb-4\">\r\n          📁&nbsp;\r\n          <FolderBreadCrumbs currentFolder={ folder }/>\r\n          <AddFile currentFolder={ folder }/>\r\n          <AddFolder currentFolder={ folder }/>\r\n        </div>\r\n\r\n        { childFolders.length > 0 && (\r\n          <div classname=\"d-flex flex-wrap\" style={{ display: \"flex\", flexDirection: \"row\", flexWrap: \"wrap\" }}>\r\n            { childFolders.map(childFolder => (\r\n              <div key={childFolder.id} style={{ maxWidth: 250 }} className=\"p-2\">\r\n                <Folder folder={childFolder} />\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n\r\n        { childFolders.length > 0 && childFiles.length > 0 && <hr /> }\r\n\r\n        { childFiles.length > 0 && (\r\n          <div classname=\"d-flex flex-wrap\" style={{ display: \"flex\", flexDirection: \"row\", flexWrap: \"wrap\" }}>\r\n            { childFiles.map(childFile => (\r\n              <div key={childFile.id} style={{ maxWidth: 250 }} className=\"p-2\">\r\n                <File file={childFile} />\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n\r\n      </Container>\r\n    </>\r\n  );\r\n}\r\n \r\nexport default Dashboard;","import React from 'react';\nimport Signup from './auth/Signup';\nimport { AuthProvider } from \"../contexts/AuthContext\";\nimport { MemoryRouter as Router } from 'react-router';\nimport { Switch, Route } from 'react-router-dom';\nimport Profile from './auth/Profile';\nimport Signin from './auth/Signin';\nimport PrivateRoute from './auth/PrivateRoute';\nimport PasswordReset from './auth/PasswordReset';\nimport UpdateProfile from './auth/UpdateProfile';\nimport Dashboard from './drive/Dashboard';\n\nfunction App() {\n  return (\n    <Router basename={process.env.PUBLIC_URL}>\n      <AuthProvider>\n        <Switch>\n          { /* Drive Components */ }\n          <PrivateRoute exact path=\"/\" component={Dashboard} />\n          <PrivateRoute exact path=\"/folder/:folderId\" component={Dashboard} />\n\n          { /* Profile Components */ }\n          <PrivateRoute path=\"/user\" component={Profile} />\n          <PrivateRoute path=\"/update-profile\" component={UpdateProfile} />\n\n          { /* Authentication Components */ }\n          <Route path=\"/signup\" component={Signup} />\n          <Route path=\"/signin\" component={Signin} />\n          <Route path=\"/reset\" component={PasswordReset} />\n          \n        </Switch>  \n      </AuthProvider>\n    </Router>\n  )\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './index.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}