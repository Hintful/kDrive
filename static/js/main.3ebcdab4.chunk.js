(this.webpackJsonpkDrive=this.webpackJsonpkDrive||[]).push([[0],{54:function(e,t,c){},55:function(e,t,c){"use strict";c.r(t);var a=c(0),r=c.n(a),n=c(20),s=c.n(n),i=c(17),j=c.n(i),u=c(19),o=c(9),d=c(61),l=c(59),b=c(60),O=c(57),h=c(7),p=c(11),x=c(35),m=(c(45),x.a.initializeApp({apiKey:"AIzaSyCxSb1Cye3xekE2YpTKODDaZTecs_oNzaE",authDomain:"authentication-dev-2c851.firebaseapp.com",projectId:"authentication-dev-2c851",storageBucket:"authentication-dev-2c851.appspot.com",messagingSenderId:"831959514644",appId:"1:831959514644:web:da5f29afb35d3d0fe87101",measurementId:"G-B2FTCVVZ8G"})),f=m.auth(),v=c(1),w=Object(a.createContext)();function g(){return Object(a.useContext)(w)}function y(e){var t=e.children,c=Object(a.useState)(),r=Object(o.a)(c,2),n=r[0],s=r[1],i=Object(a.useState)(!0),j=Object(o.a)(i,2),u=j[0],d=j[1];Object(a.useEffect)((function(){return f.onAuthStateChanged((function(e){s(e),d(!1)}))}),[]);var l={currentUser:n,signUp:function(e,t){return f.createUserWithEmailAndPassword(e,t)},signIn:function(e,t){return f.signInWithEmailAndPassword(e,t)},signOut:function(){return f.signOut()},resetPassword:function(e){return f.sendPasswordResetEmail(e)},updateEmail:function(e){return n.updateEmail(e)},updatePassword:function(e){return n.updatePassword(e)}};return Object(v.jsx)(w.Provider,{value:l,children:!u&&t})}var S=c(8);function P(){var e=Object(a.useRef)(),t=Object(a.useRef)(),c=Object(a.useRef)(),r=g(),n=r.signUp,s=(r.currentUser,Object(a.useState)("")),i=Object(o.a)(s,2),x=i[0],m=i[1],f=Object(a.useState)(!1),w=Object(o.a)(f,2),y=w[0],P=w[1],k=Object(h.h)();function N(){return(N=Object(u.a)(j.a.mark((function a(r){return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r.preventDefault(),t.current.value===c.current.value){a.next=4;break}return S.b.error("Passwords do not match!",{duration:3e3}),a.abrupt("return");case 4:return a.prev=4,m(""),P(!0),a.next=9,n(e.current.value,t.current.value);case 9:S.b.success("Account created!",{duration:1500}),setTimeout((function(){k.push("/")}),1500),a.next=16;break;case 13:a.prev=13,a.t0=a.catch(4),S.b.error("Failed to create account.",{duration:4e3});case 16:P(!1);case 17:case"end":return a.stop()}}),a,null,[[4,13]])})))).apply(this,arguments)}return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(S.a,{}),Object(v.jsx)(d.a,{children:Object(v.jsxs)(d.a.Body,{children:[Object(v.jsx)("h3",{className:"text-center mb-4",children:"Sign Up"}),x&&Object(v.jsx)(l.a,{variant:"danger",children:x}),Object(v.jsxs)(b.a,{onSubmit:function(e){return N.apply(this,arguments)},children:[Object(v.jsxs)(b.a.Group,{id:"email",children:[Object(v.jsx)(b.a.Label,{children:"Email"}),Object(v.jsx)(b.a.Control,{type:"email",ref:e,required:!0})]}),Object(v.jsxs)(b.a.Group,{id:"password",children:[Object(v.jsx)(b.a.Label,{children:"Password"}),Object(v.jsx)(b.a.Control,{type:"password",ref:t,required:!0})]}),Object(v.jsxs)(b.a.Group,{id:"password-confirm",children:[Object(v.jsx)(b.a.Label,{children:"Password Confirmation"}),Object(v.jsx)(b.a.Control,{type:"password",ref:c,required:!0})]}),Object(v.jsx)(O.a,{disabled:y,type:"submit",className:"w-100",children:"Sign Up"})]})]})}),Object(v.jsxs)("div",{className:"w-100 text-center mt-2",children:["Already have an account? ",Object(v.jsx)(p.a,{to:"/signin",children:"Sign In"})]})]})}var k=c(58),N=function(){function e(){return(e=Object(u.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(""),e.prev=1,e.next=4,b();case 4:S.b.success("Signed out!",{duration:1500}),setTimeout((function(){}),1500),x.push("/signin"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),S.b.error("Failed to sign out.",{duration:3e3});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}var t=Object(a.useState)(""),c=Object(o.a)(t,2),r=c[0],n=c[1],s=g(),i=s.currentUser,b=s.signOut,x=Object(h.h)();return Object(v.jsxs)("div",{children:[Object(v.jsx)(S.a,{}),Object(v.jsx)(d.a,{children:Object(v.jsxs)(d.a.Body,{children:[Object(v.jsx)("h3",{className:"text-center mb-4",children:"Profile"}),r&&Object(v.jsx)(l.a,{variant:"danger",children:r}),Object(v.jsx)("strong",{children:"Email:"})," ",i.email,Object(v.jsx)(p.a,{to:"/update-profile",className:"btn btn-primary w-100 mt-3",children:"Update Profile"})]})}),Object(v.jsx)("div",{className:"w-100 text-center mt-2",children:Object(v.jsx)(O.a,{variant:"link",onClick:function(){return e.apply(this,arguments)},children:"Sign Out"})})]})};function C(){var e=Object(a.useRef)(),t=Object(a.useRef)(),c=g().signIn,r=Object(a.useState)(""),n=Object(o.a)(r,2),s=n[0],i=n[1],x=Object(a.useState)(!1),m=Object(o.a)(x,2),f=m[0],w=m[1],y=Object(h.h)();function P(){return(P=Object(u.a)(j.a.mark((function a(r){return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r.preventDefault(),a.prev=1,i(""),w(!0),a.next=6,c(e.current.value,t.current.value);case 6:S.b.success("Signed in!",{duration:1500}),setTimeout((function(){y.push("/"),w(!1)}),1500),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(1),S.b.error("Failed to sign in.",{duration:3e3});case 13:w(!1);case 14:case"end":return a.stop()}}),a,null,[[1,10]])})))).apply(this,arguments)}return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(S.a,{}),Object(v.jsxs)("h1",{className:"text-center mb-5 title",children:[Object(v.jsxs)("span",{className:"emphasis",children:[Object(v.jsx)("i",{class:"fas fa-code title-logo"})," k"]}),"Drive"]}),Object(v.jsx)(d.a,{children:Object(v.jsxs)(d.a.Body,{children:[Object(v.jsx)("h3",{className:"text-center mb-4",children:"Sign In"}),s&&Object(v.jsx)(l.a,{variant:"danger",children:s}),Object(v.jsxs)(b.a,{onSubmit:function(e){return P.apply(this,arguments)},children:[Object(v.jsxs)(b.a.Group,{id:"email",children:[Object(v.jsx)(b.a.Label,{children:"Email"}),Object(v.jsx)(b.a.Control,{type:"email",ref:e,required:!0})]}),Object(v.jsxs)(b.a.Group,{id:"password",children:[Object(v.jsx)(b.a.Label,{children:"Password"}),Object(v.jsx)(b.a.Control,{type:"password",ref:t,required:!0})]}),Object(v.jsx)(O.a,{disabled:f,type:"submit",className:"w-100",children:"Sign In"})]}),Object(v.jsx)("div",{className:"w-100 text-center mt-4",children:Object(v.jsx)(p.a,{to:"/reset",children:"Forgot password?"})})]})}),Object(v.jsxs)("div",{className:"w-100 text-center mt-2",children:["Don't have an account? ",Object(v.jsx)(p.a,{to:"/signup",children:"Sign Up"})]})]})}var E=c(25),U=c(39),D=function(e){var t=e.component,c=Object(U.a)(e,["component"]),a=g().currentUser;return Object(v.jsx)(h.c,Object(E.a)(Object(E.a)({},c),{},{render:function(e){return a?Object(v.jsx)(t,Object(E.a)({},e)):Object(v.jsx)(h.b,{to:"/signin"})}}))};function I(){var e=Object(a.useRef)(),t=g().resetPassword,c=Object(a.useState)(""),r=Object(o.a)(c,2),n=r[0],s=r[1],i=Object(a.useState)(!1),x=Object(o.a)(i,2),m=x[0],f=x[1];Object(h.h)();function w(){return(w=Object(u.a)(j.a.mark((function c(a){return j.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return a.preventDefault(),c.prev=1,s(""),f(!0),c.next=6,t(e.current.value);case 6:S.b.success("Password reset e-mail has been sent!",{duration:4e3}),c.next=12;break;case 9:c.prev=9,c.t0=c.catch(1),s("Please double check the E-mail address.");case 12:f(!1);case 13:case"end":return c.stop()}}),c,null,[[1,9]])})))).apply(this,arguments)}return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(S.a,{}),Object(v.jsx)(d.a,{children:Object(v.jsxs)(d.a.Body,{children:[Object(v.jsx)("h3",{className:"text-center mb-4",children:"Reset Password"}),n&&Object(v.jsx)(l.a,{variant:"danger",children:n}),Object(v.jsxs)(b.a,{onSubmit:function(e){return w.apply(this,arguments)},children:[Object(v.jsxs)(b.a.Group,{id:"email",children:[Object(v.jsx)(b.a.Label,{children:"Email"}),Object(v.jsx)(b.a.Control,{type:"email",ref:e,required:!0})]}),Object(v.jsx)(O.a,{disabled:m,type:"submit",className:"w-100",children:"Reset Password"})]}),Object(v.jsx)("div",{className:"w-100 text-center mt-4",children:Object(v.jsx)(p.a,{to:"/signin",children:"Sign In"})})]})}),Object(v.jsxs)("div",{className:"w-100 text-center mt-2",children:["Don't have an account? ",Object(v.jsx)(p.a,{to:"/signup",children:"Sign Up"})]})]})}function G(){var e=Object(a.useRef)(),t=Object(a.useRef)(),c=Object(a.useRef)(),r=g(),n=r.currentUser,s=r.updateEmail,i=r.updatePassword,j=Object(a.useState)(""),u=Object(o.a)(j,2),x=u[0],m=u[1],f=Object(a.useState)(!1),w=Object(o.a)(f,2),y=w[0],P=w[1],k=Object(h.h)();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(S.a,{}),Object(v.jsx)(d.a,{children:Object(v.jsxs)(d.a.Body,{children:[Object(v.jsx)("h3",{className:"text-center mb-4",children:"Update Profile"}),x&&Object(v.jsx)(l.a,{variant:"danger",children:x}),Object(v.jsxs)(b.a,{onSubmit:function(a){if(a.preventDefault(),t.current.value===c.current.value){var r=[];m(""),P(!0),e.current.Value!==n.email&&r.push(s(e.current.value)),t.current.value&&r.push(i(t.current.value)),Promise.all(r).then((function(){S.b.success("Profile successfully updated!",{duration:1500}),setTimeout((function(){k.push("/"),P(!1)}),1500)})).catch((function(){S.b.error("Profile update failed.",{duration:4e3})})).finally((function(){}))}else S.b.error("Passwords do not match!",{duration:3e3})},children:[Object(v.jsxs)(b.a.Group,{id:"email",children:[Object(v.jsx)(b.a.Label,{children:"Email"}),Object(v.jsx)(b.a.Control,{type:"email",ref:e,required:!0,defaultValue:n.email})]}),Object(v.jsxs)(b.a.Group,{id:"password",children:[Object(v.jsx)(b.a.Label,{children:"Password"}),Object(v.jsx)(b.a.Control,{type:"password",ref:t,placeholder:"Leave blank to keep the same password"})]}),Object(v.jsxs)(b.a.Group,{id:"password-confirm",children:[Object(v.jsx)(b.a.Label,{children:"Password Confirmation"}),Object(v.jsx)(b.a.Control,{type:"password",ref:c,placeholder:"Leave blank to keep the same password"})]}),Object(v.jsx)(O.a,{disabled:y,type:"submit",className:"w-100",children:"Update"})]})]})}),Object(v.jsx)("div",{className:"w-100 text-center mt-2",children:Object(v.jsx)(p.a,{to:"/",children:"Go back"})})]})}var R=function(){return Object(v.jsx)(k.a,{className:"d-flex align-items-center justify-content-center",style:{minHeight:"100vh"},children:Object(v.jsx)("div",{className:"w-100",style:{maxWidth:"400px"},children:Object(v.jsx)(h.a,{basename:"/kDrive",children:Object(v.jsx)(y,{children:Object(v.jsxs)(h.e,{children:[Object(v.jsx)(D,{exact:!0,path:"/",component:N}),Object(v.jsx)(h.c,{path:"/signup",component:P}),Object(v.jsx)(h.c,{path:"/signin",component:C}),Object(v.jsx)(h.c,{path:"/reset",component:I}),Object(v.jsx)(D,{path:"/update-profile",component:G})]})})})})})};c(53),c(54);s.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(R,{})}),document.getElementById("root"))}},[[55,1,2]]]);
//# sourceMappingURL=main.3ebcdab4.chunk.js.map