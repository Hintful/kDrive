(this.webpackJsonpkDrive=this.webpackJsonpkDrive||[]).push([[0],{54:function(e,t,r){"use strict";r.r(t);var c=r(0),n=r.n(c),a=r(20),s=r.n(a),i=r(17),j=r.n(i),u=r(19),o=r(9),d=r(60),b=r(58),l=r(59),O=r(56),p=r(7),h=r(11),x=r(35),m=(r(45),x.a.initializeApp({apiKey:"AIzaSyCxSb1Cye3xekE2YpTKODDaZTecs_oNzaE",authDomain:"authentication-dev-2c851.firebaseapp.com",projectId:"authentication-dev-2c851",storageBucket:"authentication-dev-2c851.appspot.com",messagingSenderId:"831959514644",appId:"1:831959514644:web:da5f29afb35d3d0fe87101",measurementId:"G-B2FTCVVZ8G"})),f=m.auth(),v=r(1),w=Object(c.createContext)();function g(){return Object(c.useContext)(w)}function y(e){var t=e.children,r=Object(c.useState)(),n=Object(o.a)(r,2),a=n[0],s=n[1],i=Object(c.useState)(!0),j=Object(o.a)(i,2),u=j[0],d=j[1];Object(c.useEffect)((function(){return f.onAuthStateChanged((function(e){s(e),d(!1)}))}),[]);var b={currentUser:a,signUp:function(e,t){return f.createUserWithEmailAndPassword(e,t)},signIn:function(e,t){return f.signInWithEmailAndPassword(e,t)},signOut:function(){return f.signOut()},resetPassword:function(e){return f.sendPasswordResetEmail(e)},updateEmail:function(e){return a.updateEmail(e)},updatePassword:function(e){return a.updatePassword(e)}};return Object(v.jsx)(w.Provider,{value:b,children:!u&&t})}var S=r(8);function P(){var e=Object(c.useRef)(),t=Object(c.useRef)(),r=Object(c.useRef)(),n=g(),a=n.signUp,s=(n.currentUser,Object(c.useState)("")),i=Object(o.a)(s,2),x=i[0],m=i[1],f=Object(c.useState)(!1),w=Object(o.a)(f,2),y=w[0],P=w[1],k=Object(p.g)();function N(){return(N=Object(u.a)(j.a.mark((function c(n){return j.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(n.preventDefault(),t.current.value===r.current.value){c.next=4;break}return S.b.error("Passwords do not match!",{duration:3e3}),c.abrupt("return");case 4:return c.prev=4,m(""),P(!0),c.next=9,a(e.current.value,t.current.value);case 9:S.b.success("Account created!",{duration:1500}),setTimeout((function(){k.push("/")}),1500),c.next=16;break;case 13:c.prev=13,c.t0=c.catch(4),S.b.error("Failed to create account.",{duration:4e3});case 16:P(!1);case 17:case"end":return c.stop()}}),c,null,[[4,13]])})))).apply(this,arguments)}return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(S.a,{}),Object(v.jsx)(d.a,{children:Object(v.jsxs)(d.a.Body,{children:[Object(v.jsx)("h3",{className:"text-center mb-4",children:"Sign Up"}),x&&Object(v.jsx)(b.a,{variant:"danger",children:x}),Object(v.jsxs)(l.a,{onSubmit:function(e){return N.apply(this,arguments)},children:[Object(v.jsxs)(l.a.Group,{id:"email",children:[Object(v.jsx)(l.a.Label,{children:"Email"}),Object(v.jsx)(l.a.Control,{type:"email",ref:e,required:!0})]}),Object(v.jsxs)(l.a.Group,{id:"password",children:[Object(v.jsx)(l.a.Label,{children:"Password"}),Object(v.jsx)(l.a.Control,{type:"password",ref:t,required:!0})]}),Object(v.jsxs)(l.a.Group,{id:"password-confirm",children:[Object(v.jsx)(l.a.Label,{children:"Password Confirmation"}),Object(v.jsx)(l.a.Control,{type:"password",ref:r,required:!0})]}),Object(v.jsx)(O.a,{disabled:y,type:"submit",className:"w-100",children:"Sign Up"})]})]})}),Object(v.jsxs)("div",{className:"w-100 text-center mt-2",children:["Already have an account? ",Object(v.jsx)(h.b,{to:"/signin",children:"Sign In"})]})]})}var k=r(57),N=function(){function e(){return(e=Object(u.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(""),e.prev=1,e.next=4,l();case 4:S.b.success("Signed out!",{duration:1500}),setTimeout((function(){}),1500),x.push("/signin"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),S.b.error("Failed to sign out.",{duration:3e3});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}var t=Object(c.useState)(""),r=Object(o.a)(t,2),n=r[0],a=r[1],s=g(),i=s.currentUser,l=s.signOut,x=Object(p.g)();return Object(v.jsxs)("div",{children:[Object(v.jsx)(S.a,{}),Object(v.jsx)(d.a,{children:Object(v.jsxs)(d.a.Body,{children:[Object(v.jsx)("h3",{className:"text-center mb-4",children:"Profile"}),n&&Object(v.jsx)(b.a,{variant:"danger",children:n}),Object(v.jsx)("strong",{children:"Email:"})," ",i.email,Object(v.jsx)(h.b,{to:"/update-profile",className:"btn btn-primary w-100 mt-3",children:"Update Profile"})]})}),Object(v.jsx)("div",{className:"w-100 text-center mt-2",children:Object(v.jsx)(O.a,{variant:"link",onClick:function(){return e.apply(this,arguments)},children:"Sign Out"})})]})};function C(){var e=Object(c.useRef)(),t=Object(c.useRef)(),r=g().signIn,n=Object(c.useState)(""),a=Object(o.a)(n,2),s=a[0],i=a[1],x=Object(c.useState)(!1),m=Object(o.a)(x,2),f=m[0],w=m[1],y=Object(p.g)();function P(){return(P=Object(u.a)(j.a.mark((function c(n){return j.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return n.preventDefault(),c.prev=1,i(""),w(!0),c.next=6,r(e.current.value,t.current.value);case 6:S.b.success("Signed in!",{duration:1500}),setTimeout((function(){y.push("/"),w(!1)}),1500),c.next=13;break;case 10:c.prev=10,c.t0=c.catch(1),S.b.error("Failed to sign in.",{duration:3e3});case 13:w(!1);case 14:case"end":return c.stop()}}),c,null,[[1,10]])})))).apply(this,arguments)}return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(S.a,{}),Object(v.jsx)("h1",{className:"text-center mb-5",children:"kDrive"}),Object(v.jsx)(d.a,{children:Object(v.jsxs)(d.a.Body,{children:[Object(v.jsx)("h3",{className:"text-center mb-4",children:"Sign In"}),s&&Object(v.jsx)(b.a,{variant:"danger",children:s}),Object(v.jsxs)(l.a,{onSubmit:function(e){return P.apply(this,arguments)},children:[Object(v.jsxs)(l.a.Group,{id:"email",children:[Object(v.jsx)(l.a.Label,{children:"Email"}),Object(v.jsx)(l.a.Control,{type:"email",ref:e,required:!0})]}),Object(v.jsxs)(l.a.Group,{id:"password",children:[Object(v.jsx)(l.a.Label,{children:"Password"}),Object(v.jsx)(l.a.Control,{type:"password",ref:t,required:!0})]}),Object(v.jsx)(O.a,{disabled:f,type:"submit",className:"w-100",children:"Sign In"})]}),Object(v.jsx)("div",{className:"w-100 text-center mt-4",children:Object(v.jsx)(h.b,{to:"/reset",children:"Forgot password?"})})]})}),Object(v.jsxs)("div",{className:"w-100 text-center mt-2",children:["Don't have an account? ",Object(v.jsx)(h.b,{to:"/signup",children:"Sign Up"})]})]})}var E=r(25),U=r(39),I=function(e){var t=e.component,r=Object(U.a)(e,["component"]),c=g().currentUser;return Object(v.jsx)(p.b,Object(E.a)(Object(E.a)({},r),{},{render:function(e){return c?Object(v.jsx)(t,Object(E.a)({},e)):Object(v.jsx)(p.a,{to:"/signin"})}}))};function D(){var e=Object(c.useRef)(),t=g().resetPassword,r=Object(c.useState)(""),n=Object(o.a)(r,2),a=n[0],s=n[1],i=Object(c.useState)(!1),x=Object(o.a)(i,2),m=x[0],f=x[1];Object(p.g)();function w(){return(w=Object(u.a)(j.a.mark((function r(c){return j.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c.preventDefault(),r.prev=1,s(""),f(!0),r.next=6,t(e.current.value);case 6:S.b.success("Password reset e-mail has been sent!",{duration:4e3}),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(1),s("Please double check the E-mail address.");case 12:f(!1);case 13:case"end":return r.stop()}}),r,null,[[1,9]])})))).apply(this,arguments)}return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(S.a,{}),Object(v.jsx)(d.a,{children:Object(v.jsxs)(d.a.Body,{children:[Object(v.jsx)("h3",{className:"text-center mb-4",children:"Reset Password"}),a&&Object(v.jsx)(b.a,{variant:"danger",children:a}),Object(v.jsxs)(l.a,{onSubmit:function(e){return w.apply(this,arguments)},children:[Object(v.jsxs)(l.a.Group,{id:"email",children:[Object(v.jsx)(l.a.Label,{children:"Email"}),Object(v.jsx)(l.a.Control,{type:"email",ref:e,required:!0})]}),Object(v.jsx)(O.a,{disabled:m,type:"submit",className:"w-100",children:"Reset Password"})]}),Object(v.jsx)("div",{className:"w-100 text-center mt-4",children:Object(v.jsx)(h.b,{to:"/signin",children:"Sign In"})})]})}),Object(v.jsxs)("div",{className:"w-100 text-center mt-2",children:["Don't have an account? ",Object(v.jsx)(h.b,{to:"/signup",children:"Sign Up"})]})]})}function G(){var e=Object(c.useRef)(),t=Object(c.useRef)(),r=Object(c.useRef)(),n=g(),a=n.currentUser,s=n.updateEmail,i=n.updatePassword,j=Object(c.useState)(""),u=Object(o.a)(j,2),x=u[0],m=u[1],f=Object(c.useState)(!1),w=Object(o.a)(f,2),y=w[0],P=w[1],k=Object(p.g)();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(S.a,{}),Object(v.jsx)(d.a,{children:Object(v.jsxs)(d.a.Body,{children:[Object(v.jsx)("h3",{className:"text-center mb-4",children:"Update Profile"}),x&&Object(v.jsx)(b.a,{variant:"danger",children:x}),Object(v.jsxs)(l.a,{onSubmit:function(c){if(c.preventDefault(),t.current.value===r.current.value){var n=[];m(""),P(!0),e.current.Value!==a.email&&n.push(s(e.current.value)),t.current.value&&n.push(i(t.current.value)),Promise.all(n).then((function(){S.b.success("Profile successfully updated!",{duration:1500}),setTimeout((function(){k.push("/"),P(!1)}),1500)})).catch((function(){S.b.error("Profile update failed.",{duration:4e3})})).finally((function(){}))}else S.b.error("Passwords do not match!",{duration:3e3})},children:[Object(v.jsxs)(l.a.Group,{id:"email",children:[Object(v.jsx)(l.a.Label,{children:"Email"}),Object(v.jsx)(l.a.Control,{type:"email",ref:e,required:!0,defaultValue:a.email})]}),Object(v.jsxs)(l.a.Group,{id:"password",children:[Object(v.jsx)(l.a.Label,{children:"Password"}),Object(v.jsx)(l.a.Control,{type:"password",ref:t,placeholder:"Leave blank to keep the same password"})]}),Object(v.jsxs)(l.a.Group,{id:"password-confirm",children:[Object(v.jsx)(l.a.Label,{children:"Password Confirmation"}),Object(v.jsx)(l.a.Control,{type:"password",ref:r,placeholder:"Leave blank to keep the same password"})]}),Object(v.jsx)(O.a,{disabled:y,type:"submit",className:"w-100",children:"Update"})]})]})}),Object(v.jsx)("div",{className:"w-100 text-center mt-2",children:Object(v.jsx)(h.b,{to:"/",children:"Go back"})})]})}var R=function(){return Object(v.jsx)(k.a,{className:"d-flex align-items-center justify-content-center",style:{minHeight:"100vh"},children:Object(v.jsx)("div",{className:"w-100",style:{maxWidth:"400px"},children:Object(v.jsx)(h.a,{children:Object(v.jsx)(y,{children:Object(v.jsxs)(p.d,{children:[Object(v.jsx)(I,{exact:!0,path:"/",component:N}),Object(v.jsx)(p.b,{path:"/signup",component:P}),Object(v.jsx)(p.b,{path:"/signin",component:C}),Object(v.jsx)(p.b,{path:"/reset",component:D}),Object(v.jsx)(I,{path:"/update-profile",component:G})]})})})})})};r(53);s.a.render(Object(v.jsx)(n.a.StrictMode,{children:Object(v.jsx)(R,{})}),document.getElementById("root"))}},[[54,1,2]]]);
//# sourceMappingURL=main.501f3bd8.chunk.js.map